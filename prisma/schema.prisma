generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Resource {
  id          Int           @id @default(autoincrement())
  name        String        // π.χ. "Dr. Vasilis" ή "Alexandrite Laser"
  type        String        // "MEDICAL" ή "AESTHETIC"
  appointments Appointment[]
}

model Appointment {
  id          Int      @id @default(autoincrement())
  date        DateTime // Ημερομηνία & Ώρα
  status      String   @default("FREE") // "FREE", "BOOKED"
  
  // Στοιχεία Πελάτη
  patientName String?
  patientTel  String?
  notes       String?

  // Default Duration
  duration    Int      @default(30)  

  // Σύνδεση με Πόρο
  resourceId  Int
  resource    Resource @relation(fields: [resourceId], references: [id])
  
  createdAt   DateTime @default(now())

  // Δεν γίνεται να κλείσεις τον ίδιο πόρο την ίδια ώρα
  @@unique([date, resourceId])
}

// Daily notes
model DayNote {
  id      Int      @id @default(autoincrement())
  date    DateTime @unique
  content String   @db.Text // Μεγάλο κείμενο
}